{{ require_css(get_asset_url('../../upcoming-events.css')) }}
{{ require_js(get_asset_url('../../upcoming-events.js'), 'footer') }}

{% set APP_CONFIG = {
  'appRoot': content_by_id(module.event_page).absoluteUrl,
  'portalId': portal_id,
}
%}
{% require_js position="head" %}
<script>
  var APP_CONFIG_{{ name }} = {{ APP_CONFIG|tojson }};
</script>
{% end_require_js %}

{%- macro outputColorIfSet(color) -%}
  {%- if color.color -%}
    rgba({{color.color|convert_rgb}}, {{color.opacity/100}})
  {%- else -%}
    inherit
  {%- endif -%}
{%- endmacro -%}

<div class="upcoming-events"
     style="background-color:{{outputColorIfSet(module.background_color)}};
            color:{{outputColorIfSet(module.text_color)}};">
  {% require_css %}
  <style>
    #hs_cos_wrapper_{{ name }} .event-card {
      background-color: {{outputColorIfSet(module.event_card_color)}};
    }

    #hs_cos_wrapper_{{ name }} .event-card__title {
      color: {{outputColorIfSet(module.event_title_color)}};
    }

    #hs_cos_wrapper_{{ name }} .event-header {
      color: {{outputColorIfSet(module.title_color)}};
    }
  </style>
  {% end_require_css %}
  <h2 class="event-header">Upcoming Events</h2>
  <div class="upcoming-events__module" data-config="APP_CONFIG_{{ name }}"></div>
</div>

